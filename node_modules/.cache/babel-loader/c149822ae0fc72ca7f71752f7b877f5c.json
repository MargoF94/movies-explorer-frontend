{"ast":null,"code":"import _toConsumableArray from\"/Users/localmoyashi/dev/movies-explorer-frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/localmoyashi/dev/movies-explorer-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{Route,Switch,useHistory,useLocation}from'react-router-dom';import Main from'../Main/Main';import Movies from'../Movies/Movies';import SavedMovies from'../SavedMovies/SavedMovies';import Profile from'../Profile/Profile';import Login from'../Login/Login';import Register from'../Register/Register';import Page404 from'../Page404/Page404';import InfoTooltip from'../InfoTooltip/InfoTooltip';import ProtectedRoute from'../ProtectedRoute/ProtectedRoute';import*as tooltip from'../../utils/tooltip';import*as MainApi from'../../utils/MainApi';import*as MoviesApi from'../../utils/MoviesApi';import'./App.css';import{CurrentUserContext}from'../../contexts/CurrentUserContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var history=useHistory();var location=useLocation();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoggedIn=_useState2[0],setIsLoggedIn=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),currentUser=_useState4[0],setCurrentUser=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isInfoToolTipOpen=_useState6[0],setIsInfoToolTipOpen=_useState6[1];var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),infoToolTipInfo=_useState8[0],setInfoToolTipInfo=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),movies=_useState10[0],setMovies=_useState10[1];// Фильмы, полученные от Api\nvar _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),savedMovies=_useState12[0],setSavedMovies=_useState12[1];// Фильмы, сохраненные пользователем\nvar _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),movieSearchResult=_useState14[0],setMovieSearchResult=_useState14[1];var _useState15=useState([]),_useState16=_slicedToArray(_useState15,2),savedMovieSearchResult=_useState16[0],setSavedMovieSearchResult=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),isShortMovieChecked=_useState18[0],setIsShortMovieChecked=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),isLoading=_useState20[0],setIsLoading=_useState20[1];var _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),isNoResults=_useState22[0],setIsNoResuls=_useState22[1];var _useState23=useState(false),_useState24=_slicedToArray(_useState23,2),areSavedMoviesFiltered=_useState24[0],setAreSavedMoviesFiltered=_useState24[1];// ЛОКАЛЬНОЕ ХРАНИЛИЩЕ\n// Текст запроса\nvar searchWordLocalStorage=localStorage.getItem('searchWord');// Обработка регистрации\nfunction handleRegister(name,email,password){MainApi.register(email,password,name).then(function(res){if(res.ok){history.push('/signin');setInfoToolTipInfo({message:tooltip.registrationSuccess,image:tooltip.successIcon});}else{setInfoToolTipInfo({message:tooltip.registrationFail,image:tooltip.successIcon});}}).catch(function(err){console.log(err);setInfoToolTipInfo({message:tooltip.registrationFail,image:tooltip.failIcon});}).finally(function(){setIsInfoToolTipOpen(true);});}// Обработка логина\nfunction handleLogin(email,password){if(!email||!password){console.log('No email or password on login; aborting.');console.log(\"Email: \".concat(email));console.log(\"Password: \".concat(password));return;}MainApi.login(email,password).then(function(data){if(!data.jwt){throw new Error('Произошла ошибка (авторизации на фронте)');}localStorage.setItem('jwt',data.jwt);localStorage.setItem('searchResults',[]);localStorage.setItem('filterState',false);localStorage.setItem('searchWord','');localStorage.setItem('searchWordInSaved','');return data._id;}).then(function(id){tokenCheck();setCurrentUser({_id:id});setInfoToolTipInfo({message:tooltip.loginSuccess,image:tooltip.successIcon});}).catch(function(err){console.log(err);setInfoToolTipInfo({message:tooltip.loginFail,image:tooltip.failIcon});}).finally(function(){console.log(\"Before Popup open: \".concat(isLoggedIn));setIsInfoToolTipOpen(true);});}// Обработка обновления профиля\nfunction handleEditProfileSubmit(name,email){MainApi.editProfile(name,email).then(function(data){setCurrentUser(data);setInfoToolTipInfo({message:tooltip.updateSuccess,image:tooltip.successIcon});}).catch(function(err){console.log(err);setInfoToolTipInfo({message:tooltip.updateFail,image:tooltip.failIcon});}).finally(function(){setIsInfoToolTipOpen(true);});}function handleLogOut(){localStorage.removeItem('jwt');localStorage.removeItem('searcResults');localStorage.removeItem('searchWord');localStorage.removeItem('searchWordInSaved');localStorage.removeItem('filterState');setIsLoggedIn(false);history.push('/signin');}function closePopups(){setIsInfoToolTipOpen(false);}// Добавить фильм в библиотеку сохраненных фильмов\n// или оповестить юзера об ошибке\nfunction handleSetLike(movie){var isSaved=savedMovies.find(function(savedMovie){return savedMovie.movieId===movie.movieId;});if(isSaved===undefined){MainApi.createLocalCard(movie).then(function(data){console.log(data);var createdMovie=data.movie;setInfoToolTipInfo({message:tooltip.saveSuccess,image:tooltip.successIcon});setSavedMovies([createdMovie].concat(_toConsumableArray(savedMovies)));}).catch(function(err){setInfoToolTipInfo({message:tooltip.saveFail,image:tooltip.failIcon});setIsInfoToolTipOpen(true);}).finally(function(){setIsInfoToolTipOpen(true);});}else{setInfoToolTipInfo({message:tooltip.saveFailRepeat,image:tooltip.failIcon});setIsInfoToolTipOpen(true);}}function handleRemoveLike(movie){// console.log(`In App handleRemoveLike movie: id: ${movie.movieId}`);\nMainApi.deleteLocalMovie(movie.movieId).then(function(){setSavedMovies(function(savedMovies){return savedMovies.filter(function(m){return m.movieId!==movie.movieId;});});setInfoToolTipInfo({message:tooltip.removeSuccess,image:tooltip.successIcon});}).catch(function(err){console.log(err);setInfoToolTipInfo({message:tooltip.removeFail,image:tooltip.failIcon});}).finally(function(){setIsInfoToolTipOpen(true);});}// Переключатель состояния фильтра короткометражек\n// Переписывает значение фильтра на локальном диске и \n// переменной состояния\nfunction toggleCheckBox(){var filter=JSON.parse(localStorage.getItem('filterState'));localStorage.setItem('filterState',!filter);setIsShortMovieChecked(!filter);// console.log(`FILTER STATE (LOCAL) ON TOGGLE IS ${localStorage.getItem('filterState')}`);\n// console.log(`FILTER STATE (STATE) ON TOGGLE IS ${isShortMovieChecked}`);\n}// Функция по фильтрации массивов с фильмами по ключевому слову\n// и длительности\nfunction filterBySearchWord(list,word,isShortOn){if(list.length>0){if(!isShortOn){return list.filter(function(movie){return movie.nameRU.toLowerCase().includes(word.toLowerCase())&&movie.duration<40;});}else{return list.filter(function(movie){return movie.nameRU.toLowerCase().includes(word.toLowerCase());});}}else{return[];}}function handleSearchRequest(word){setIsLoading(true);// console.log(`IN SEARCH: WORD ${word}`)\n// console.log(`IN SEARCH: MOVIES ${movies}`)\n// console.log(`IN SEARCH: SAVED MOVIES ${savedMovies}`);\n// console.log(`isShortMovieChecked: ${isShortMovieChecked}`);\nsetTimeout(function(){// console.log(`IN SEARCH: MOVIES TO FILTER ${movies}`);\nvar movieList=filterBySearchWord(movies,word,isShortMovieChecked);// Сравниваем два массива,\n// повторяющиеся фильмы берем с серверной стороны\n// const movieList = allFilteredMovies.map((movie) => {\n//   const savedMovie = allSavedMovies.find((savedM) => savedM.movieId === movie.id);\n//   return savedMovie ?? movie;\n// })\n// Если результатов нет - записываем в переменную пустой массив\nif(movieList!==null&&movieList.length!==0){localStorage.setItem('searchResults',JSON.stringify(movieList));setIsNoResuls(false);}else{localStorage.setItem('searchResults',[]);setIsNoResuls(true);}setMovieSearchResult(movieList);setIsLoading(false);},1000);}function handleSearchRequestInSaved(word){setIsLoading(true);// console.log(`IN SEARCH: WORD ${word}`)\n// console.log(`IN SEARCH: SAVED MOVIES ${savedMovies}`);\n// console.log(`isShortMovieChecked: ${isShortMovieChecked}`);\nsetTimeout(function(){var movieList=filterBySearchWord(savedMovies,word,isShortMovieChecked);if(movieList!==null&&movieList.length!==0){setIsNoResuls(false);}else{setIsNoResuls(true);}setSavedMovieSearchResult(movieList);setAreSavedMoviesFiltered(true);setIsLoading(false);},1000);}// Проверяем наличие токена в локальном хранилище\n// если токен присутствует - \n// меняем состояние логина и\n// забираем данные о юзере с сервера и сохранем в переменную состояния. \nfunction tokenCheck(){var jwt=localStorage.getItem('jwt');// console.log('ACTION 1 (tokenCheck)');\n// console.log(`Token in tokenCheck: ${jwt}`);\n// console.log(`777777777 Token in tokenCheck: idLoggedIn ${isLoggedIn}`);\n// console.log(`22222 In getSearchResults: ${movieSearchResult}`);\nif(jwt){MainApi.getContent(jwt).then(function(user){if(user){setCurrentUser(user);setIsLoggedIn(true);setMovieSearchResult(getSearchResults);setIsShortMovieChecked(JSON.parse(localStorage.getItem('filterState')));// console.log(`isShortMovieChecked ${isShortMovieChecked}`)\nlocation.pathname==='/signin'?history.push('/movies'):history.push(location.pathname);// console.log(`Token in tokenCheck: idLoggedIn ${isLoggedIn}`);\n// console.log(`In tokenCheck: getContent currentUSer: ${currentUser}`);\n// console.log(`In tokenCheck: getContent response: ${JSON.stringify(user)}`);\n}else{localStorage.removeItem('jwt');}}).catch(function(err){console.log(err);localStorage.removeItem('jwt');});}}// Извлекает и записывает данные с локального хранилища в переменную состояния\nfunction getSearchResults(){return localStorage.getItem('searchResults').length>0?JSON.parse(localStorage.getItem('searchResults')):[];}// Если пользователь залогинен\n// получаем все фильмы с API и сохраненные юзером фильмы\nuseEffect(function(){if(isLoggedIn){console.log(\"Fetching movies...\");console.log('ACTION 2 (about to fetch movies)');Promise.all([MoviesApi.getMovies(),MainApi.getSavedMovies()]).then(function(_ref){var _ref2=_slicedToArray(_ref,2),allMovies=_ref2[0],userSavedMovies=_ref2[1];// console.log('ACTION 3 (about to set movies and savedMovies)');\n// console.log(`In MainApi.getSavedMovies: allMovies: ${allMovies.length}`);\n// console.log(`In MainApi.getSavedMovies: allMovies: ${JSON.stringify(allMovies)}`);\n// console.log(`In MainApi.getSavedMovies: allMovies: ${Array.isArray(allMovies)}`);\n// console.log(`In MainApi.getSavedMovies: savedMovies: ${userSavedMovies.length}`);\n// console.log(`In MainApi.getSavedMovies: savedMovies: ${JSON.stringify(userSavedMovies)}`);\n// console.log(`In MainApi.getSavedMovies: savedMovies: ${Array.isArray(userSavedMovies)}`);\nsetMovies(allMovies);if(userSavedMovies){var filteredMovies=userSavedMovies.filter(function(m){return m.owner===currentUser._id;});setSavedMovies(filteredMovies!==undefined?filteredMovies:[]);// console.log(`In MainApi.getSavedMovies: savedMovies: ${savedMovies}`);\n}else{setSavedMovies([]);}}).catch(function(err){console.log(err);});}},[isLoggedIn]);// Проверяем токен при передвижению по сайту\n// Перезаписываем отфильтрованные фильмы в переменную состояния\n// из локального хранилища\nuseEffect(function(){tokenCheck();},[]);return/*#__PURE__*/_jsx(CurrentUserContext.Provider,{value:currentUser,children:/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",children:/*#__PURE__*/_jsx(Main,{isLoggedIn:isLoggedIn})}),/*#__PURE__*/_jsx(ProtectedRoute,{path:\"/movies\",component:Movies,movies:movieSearchResult,savedMovies:savedMovies,searchWord:searchWordLocalStorage,handleSetLike:handleSetLike,handleRemoveLike:handleRemoveLike,onSearch:handleSearchRequest,handleCheckboxToggle:toggleCheckBox,isLoggedIn:isLoggedIn,isShortMovieChecked:isShortMovieChecked,isNoResults:isNoResults,isLoading:isLoading}),/*#__PURE__*/_jsx(ProtectedRoute,{path:\"/saved-movies\",component:SavedMovies,movies:areSavedMoviesFiltered?savedMovieSearchResult:savedMovies,savedMovieSearchResult:savedMovieSearchResult,areSavedMoviesFiltered:areSavedMoviesFiltered,handleRemoveLike:handleRemoveLike,onSearch:handleSearchRequest,onSavedSearch:handleSearchRequestInSaved,handleCheckboxToggle:toggleCheckBox,isLoggedIn:isLoggedIn,isShortMovieChecked:isShortMovieChecked,isNoResults:isNoResults}),/*#__PURE__*/_jsx(ProtectedRoute,{path:\"/profile\",component:Profile,onSubmit:handleEditProfileSubmit,onLogOut:handleLogOut,isLoggedIn:isLoggedIn}),/*#__PURE__*/_jsx(Route,{path:\"/signin\",children:/*#__PURE__*/_jsx(Login,{handleLogin:handleLogin})}),/*#__PURE__*/_jsx(Route,{path:\"/signup\",children:/*#__PURE__*/_jsx(Register,{handleRegister:handleRegister})}),/*#__PURE__*/_jsx(Route,{path:\"*\",children:/*#__PURE__*/_jsx(Page404,{})})]}),/*#__PURE__*/_jsx(InfoTooltip,{isOpen:isInfoToolTipOpen,onClose:closePopups,info:infoToolTipInfo})]})});}export default App;","map":{"version":3,"names":["React","useEffect","useState","Route","Switch","useHistory","useLocation","Main","Movies","SavedMovies","Profile","Login","Register","Page404","InfoTooltip","ProtectedRoute","tooltip","MainApi","MoviesApi","CurrentUserContext","App","history","location","isLoggedIn","setIsLoggedIn","currentUser","setCurrentUser","isInfoToolTipOpen","setIsInfoToolTipOpen","infoToolTipInfo","setInfoToolTipInfo","movies","setMovies","savedMovies","setSavedMovies","movieSearchResult","setMovieSearchResult","savedMovieSearchResult","setSavedMovieSearchResult","isShortMovieChecked","setIsShortMovieChecked","isLoading","setIsLoading","isNoResults","setIsNoResuls","areSavedMoviesFiltered","setAreSavedMoviesFiltered","searchWordLocalStorage","localStorage","getItem","handleRegister","name","email","password","register","then","res","ok","push","message","registrationSuccess","image","successIcon","registrationFail","catch","err","console","log","failIcon","finally","handleLogin","login","data","jwt","Error","setItem","_id","id","tokenCheck","loginSuccess","loginFail","handleEditProfileSubmit","editProfile","updateSuccess","updateFail","handleLogOut","removeItem","closePopups","handleSetLike","movie","isSaved","find","savedMovie","movieId","undefined","createLocalCard","createdMovie","saveSuccess","saveFail","saveFailRepeat","handleRemoveLike","deleteLocalMovie","filter","m","removeSuccess","removeFail","toggleCheckBox","JSON","parse","filterBySearchWord","list","word","isShortOn","length","nameRU","toLowerCase","includes","duration","handleSearchRequest","setTimeout","movieList","stringify","handleSearchRequestInSaved","getContent","user","getSearchResults","pathname","Promise","all","getMovies","getSavedMovies","allMovies","userSavedMovies","filteredMovies","owner"],"sources":["/Users/localmoyashi/dev/movies-explorer-frontend/src/components/App/App.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Route, Switch, useHistory, useLocation } from 'react-router-dom';\nimport Main from '../Main/Main';\nimport Movies from '../Movies/Movies';\nimport SavedMovies from '../SavedMovies/SavedMovies';\nimport Profile from '../Profile/Profile';\nimport Login from '../Login/Login';\nimport Register from '../Register/Register';\nimport Page404 from '../Page404/Page404';\nimport InfoTooltip from '../InfoTooltip/InfoTooltip';\nimport ProtectedRoute from '../ProtectedRoute/ProtectedRoute';\nimport * as tooltip from '../../utils/tooltip';\nimport * as MainApi from '../../utils/MainApi';\nimport * as MoviesApi from '../../utils/MoviesApi';\nimport './App.css';\nimport { CurrentUserContext } from '../../contexts/CurrentUserContext';\n\nfunction App() {\n\n  const history = useHistory();\n  const location = useLocation();\n\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [currentUser, setCurrentUser] = useState({});\n  const [isInfoToolTipOpen, setIsInfoToolTipOpen] = useState(false);\n  const [infoToolTipInfo, setInfoToolTipInfo] = useState({});\n  const [movies, setMovies] = useState([]); // Фильмы, полученные от Api\n  const [savedMovies, setSavedMovies] = useState([]); // Фильмы, сохраненные пользователем\n  const [movieSearchResult, setMovieSearchResult] = useState([]);\n  const [savedMovieSearchResult, setSavedMovieSearchResult] = useState([]);\n  const [isShortMovieChecked, setIsShortMovieChecked] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [isNoResults, setIsNoResuls] = useState(false);\n  const [areSavedMoviesFiltered, setAreSavedMoviesFiltered] = useState(false);\n\n  // ЛОКАЛЬНОЕ ХРАНИЛИЩЕ\n\n  // Текст запроса\n  const searchWordLocalStorage = localStorage.getItem('searchWord');\n\n  // Обработка регистрации\n\n  function handleRegister (name, email, password) {\n    MainApi.register(email, password, name)\n      .then((res) => {\n        if (res.ok) {\n          history.push('/signin');\n          setInfoToolTipInfo({\n            message: tooltip.registrationSuccess,\n            image: tooltip.successIcon\n          });\n        } else {\n          setInfoToolTipInfo({\n            message: tooltip.registrationFail,\n            image: tooltip.successIcon\n          })\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setInfoToolTipInfo({\n          message: tooltip.registrationFail,\n          image: tooltip.failIcon\n        });\n      })\n      .finally(() => {\n        setIsInfoToolTipOpen(true);\n      })\n  }\n  \n  // Обработка логина\n\n  function handleLogin (email, password) {\n    if (!email || !password) {\n      console.log('No email or password on login; aborting.');\n      console.log(`Email: ${email}`);\n      console.log(`Password: ${password}`);\n      return;\n    }\n    \n    MainApi.login(email, password)\n      .then((data) => {\n        if(!data.jwt) {\n          throw new Error('Произошла ошибка (авторизации на фронте)');\n        }\n        localStorage.setItem('jwt', data.jwt);\n        localStorage.setItem('searchResults', []);\n        localStorage.setItem('filterState', false);\n        localStorage.setItem('searchWord', '');\n        localStorage.setItem('searchWordInSaved', '');\n        return data._id;\n      })\n      .then((id) => {\n        tokenCheck();\n        setCurrentUser({\n          _id: id,\n        });\n        setInfoToolTipInfo({\n          message: tooltip.loginSuccess,\n          image: tooltip.successIcon\n        })\n      })\n      .catch((err) => {\n        console.log(err);\n        setInfoToolTipInfo({\n          message: tooltip.loginFail,\n          image: tooltip.failIcon\n        });\n      })\n      .finally(() => {\n        console.log(`Before Popup open: ${isLoggedIn}`)\n        setIsInfoToolTipOpen(true);\n      });\n  }\n\n  // Обработка обновления профиля\n\n  function handleEditProfileSubmit (name, email) {\n    MainApi.editProfile(name, email)\n      .then((data) => {\n        setCurrentUser(data);\n        setInfoToolTipInfo({\n          message: tooltip.updateSuccess,\n          image: tooltip.successIcon\n        })\n      })\n      .catch((err) => {\n        console.log(err);\n        setInfoToolTipInfo({\n          message: tooltip.updateFail,\n          image: tooltip.failIcon\n        })\n      })\n      .finally(() => {\n        setIsInfoToolTipOpen(true)\n      });\n  }\n\n  function handleLogOut () {\n    localStorage.removeItem('jwt');\n    localStorage.removeItem('searcResults');\n    localStorage.removeItem('searchWord');\n    localStorage.removeItem('searchWordInSaved');\n    localStorage.removeItem('filterState');\n    setIsLoggedIn(false);\n    history.push('/signin');\n  }\n\n  function closePopups () {\n    setIsInfoToolTipOpen(false);\n  }\n\n  // Добавить фильм в библиотеку сохраненных фильмов\n  // или оповестить юзера об ошибке\n\n  function handleSetLike(movie) {\n\n    const isSaved = savedMovies.find((savedMovie) => savedMovie.movieId  === movie.movieId);\n\n    if(isSaved === undefined) {\n      MainApi.createLocalCard(movie)\n      .then((data) => {\n        console.log(data);\n        const createdMovie = data.movie;\n\n        setInfoToolTipInfo({\n          message: tooltip.saveSuccess,\n          image: tooltip.successIcon\n        });\n        setSavedMovies([createdMovie, ...savedMovies]);\n      })\n      .catch((err) => {\n        setInfoToolTipInfo({\n          message: tooltip.saveFail,\n          image: tooltip.failIcon\n        });\n        setIsInfoToolTipOpen(true);\n      })\n      .finally(() => {\n        setIsInfoToolTipOpen(true);\n      })\n    } else {\n      setInfoToolTipInfo({\n        message: tooltip.saveFailRepeat,\n        image: tooltip.failIcon\n      });\n      setIsInfoToolTipOpen(true);\n    } \n  }\n\n  function handleRemoveLike (movie) {\n    // console.log(`In App handleRemoveLike movie: id: ${movie.movieId}`);\n    MainApi.deleteLocalMovie(movie.movieId)\n      .then(() => {\n        setSavedMovies((savedMovies) => savedMovies.filter((m) => m.movieId !== movie.movieId));\n        setInfoToolTipInfo({\n          message: tooltip.removeSuccess,\n          image: tooltip.successIcon\n        });\n      })\n      .catch((err) => {\n        console.log(err);\n        setInfoToolTipInfo({\n          message: tooltip.removeFail,\n          image: tooltip.failIcon\n        });\n      })\n      .finally(() => {\n        setIsInfoToolTipOpen(true);\n      });\n  }\n\n  // Переключатель состояния фильтра короткометражек\n  // Переписывает значение фильтра на локальном диске и \n  // переменной состояния\n\n  function toggleCheckBox() {\n    const filter = JSON.parse(localStorage.getItem('filterState'));\n    localStorage.setItem('filterState', !filter);\n    setIsShortMovieChecked(!filter);\n    // console.log(`FILTER STATE (LOCAL) ON TOGGLE IS ${localStorage.getItem('filterState')}`);\n    // console.log(`FILTER STATE (STATE) ON TOGGLE IS ${isShortMovieChecked}`);\n  }\n\n  // Функция по фильтрации массивов с фильмами по ключевому слову\n  // и длительности\n\n  function filterBySearchWord(list, word, isShortOn) {\n    if (list.length > 0) {\n      if (!isShortOn) {\n        return list.filter((movie) => movie.nameRU.toLowerCase().includes(word.toLowerCase()) && movie.duration < 40);\n      } else {\n        return list.filter((movie) => movie.nameRU.toLowerCase().includes(word.toLowerCase()));\n      }\n    } else {\n      return [];\n    }\n  }\n\n\n  function handleSearchRequest(word) {\n    setIsLoading(true);\n\n    // console.log(`IN SEARCH: WORD ${word}`)\n    // console.log(`IN SEARCH: MOVIES ${movies}`)\n    // console.log(`IN SEARCH: SAVED MOVIES ${savedMovies}`);\n    // console.log(`isShortMovieChecked: ${isShortMovieChecked}`);\n\n    setTimeout(() => {\n      \n      // console.log(`IN SEARCH: MOVIES TO FILTER ${movies}`);\n\n      const movieList = filterBySearchWord(movies, word, isShortMovieChecked);\n  \n      // Сравниваем два массива,\n      // повторяющиеся фильмы берем с серверной стороны\n      // const movieList = allFilteredMovies.map((movie) => {\n      //   const savedMovie = allSavedMovies.find((savedM) => savedM.movieId === movie.id);\n      //   return savedMovie ?? movie;\n      // })\n\n      // Если результатов нет - записываем в переменную пустой массив\n      if(movieList !== null && movieList.length !== 0) {\n        localStorage.setItem('searchResults', JSON.stringify(movieList));\n        setIsNoResuls(false);\n      } else {\n        localStorage.setItem('searchResults', []);\n        setIsNoResuls(true);\n      }\n\n      setMovieSearchResult(movieList);\n      setIsLoading(false);\n    }, 1000);\n  }\n\n  function handleSearchRequestInSaved(word) {\n    setIsLoading(true);\n    // console.log(`IN SEARCH: WORD ${word}`)\n    // console.log(`IN SEARCH: SAVED MOVIES ${savedMovies}`);\n    // console.log(`isShortMovieChecked: ${isShortMovieChecked}`);\n\n    setTimeout(() => {\n\n      const movieList = filterBySearchWord(savedMovies, word, isShortMovieChecked);\n\n      if(movieList !== null && movieList.length !== 0) {\n        setIsNoResuls(false);\n      } else {\n        setIsNoResuls(true);\n      }\n\n      setSavedMovieSearchResult(movieList);\n      setAreSavedMoviesFiltered(true);\n      setIsLoading(false);\n    }, 1000);\n  }\n\n  // Проверяем наличие токена в локальном хранилище\n  // если токен присутствует - \n  // меняем состояние логина и\n  // забираем данные о юзере с сервера и сохранем в переменную состояния. \n\n  function tokenCheck () {\n    const jwt = localStorage.getItem('jwt');\n\n    // console.log('ACTION 1 (tokenCheck)');\n    // console.log(`Token in tokenCheck: ${jwt}`);\n    // console.log(`777777777 Token in tokenCheck: idLoggedIn ${isLoggedIn}`);\n    // console.log(`22222 In getSearchResults: ${movieSearchResult}`);\n\n    if (jwt) {\n      MainApi.getContent(jwt)\n        .then((user) => {\n          if (user) {\n            setCurrentUser(user);\n            setIsLoggedIn(true);\n            setMovieSearchResult(getSearchResults);\n            setIsShortMovieChecked(JSON.parse(localStorage.getItem('filterState')));\n            // console.log(`isShortMovieChecked ${isShortMovieChecked}`)\n            location.pathname === '/signin' ? \n              history.push('/movies') :\n              history.push(location.pathname);\n            // console.log(`Token in tokenCheck: idLoggedIn ${isLoggedIn}`);\n\n            // console.log(`In tokenCheck: getContent currentUSer: ${currentUser}`);\n            // console.log(`In tokenCheck: getContent response: ${JSON.stringify(user)}`);\n          } else {\n            localStorage.removeItem('jwt');\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n          localStorage.removeItem('jwt');\n        })\n    }\n  }\n\n  // Извлекает и записывает данные с локального хранилища в переменную состояния\n\n  function getSearchResults() {\n    return localStorage.getItem('searchResults').length > 0 ?\n      JSON.parse(localStorage.getItem('searchResults')) :\n      [];\n  }\n\n  // Если пользователь залогинен\n  // получаем все фильмы с API и сохраненные юзером фильмы\n\n  useEffect(() => {\n    if(isLoggedIn) {\n      console.log(`Fetching movies...`);\n      console.log('ACTION 2 (about to fetch movies)');\n\n      Promise.all([\n        MoviesApi.getMovies(),\n        MainApi.getSavedMovies()\n      ])\n      .then(([allMovies, userSavedMovies]) => {\n        // console.log('ACTION 3 (about to set movies and savedMovies)');\n        // console.log(`In MainApi.getSavedMovies: allMovies: ${allMovies.length}`);\n        // console.log(`In MainApi.getSavedMovies: allMovies: ${JSON.stringify(allMovies)}`);\n        // console.log(`In MainApi.getSavedMovies: allMovies: ${Array.isArray(allMovies)}`);\n        // console.log(`In MainApi.getSavedMovies: savedMovies: ${userSavedMovies.length}`);\n        // console.log(`In MainApi.getSavedMovies: savedMovies: ${JSON.stringify(userSavedMovies)}`);\n        // console.log(`In MainApi.getSavedMovies: savedMovies: ${Array.isArray(userSavedMovies)}`);\n        setMovies(allMovies);\n        if (userSavedMovies) {\n          const filteredMovies = userSavedMovies.filter((m) => m.owner === currentUser._id);\n          setSavedMovies(filteredMovies !== undefined ? filteredMovies : []);\n          // console.log(`In MainApi.getSavedMovies: savedMovies: ${savedMovies}`);\n        } else {\n          setSavedMovies([]);\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n      })\n    }    \n  }, [isLoggedIn])\n\n  // Проверяем токен при передвижению по сайту\n  // Перезаписываем отфильтрованные фильмы в переменную состояния\n  // из локального хранилища\n\n  useEffect(() => {\n    tokenCheck();\n  }, []);\n\n  \n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"app\">\n        <Switch>\n          <Route exact path=\"/\">\n            <Main\n              isLoggedIn={isLoggedIn} />\n          </Route>\n\n          <ProtectedRoute\n            path=\"/movies\"\n            component={Movies}\n            movies={movieSearchResult}\n            savedMovies={savedMovies}\n            searchWord={searchWordLocalStorage}\n            handleSetLike={handleSetLike}\n            handleRemoveLike={handleRemoveLike}\n            onSearch={handleSearchRequest}\n            handleCheckboxToggle={toggleCheckBox}\n            isLoggedIn={isLoggedIn}\n            isShortMovieChecked={isShortMovieChecked}\n            isNoResults={isNoResults}\n            isLoading={isLoading} />\n\n          <ProtectedRoute\n            path=\"/saved-movies\"\n            component={SavedMovies}\n            movies={areSavedMoviesFiltered ? savedMovieSearchResult : savedMovies}\n            savedMovieSearchResult={savedMovieSearchResult}\n            areSavedMoviesFiltered={areSavedMoviesFiltered}\n            handleRemoveLike={handleRemoveLike}\n            onSearch={handleSearchRequest}\n            onSavedSearch={handleSearchRequestInSaved}\n            handleCheckboxToggle={toggleCheckBox}\n            isLoggedIn={isLoggedIn}\n            isShortMovieChecked={isShortMovieChecked}\n            isNoResults={isNoResults} />\n\n          <ProtectedRoute\n            path=\"/profile\"\n            component={Profile}\n            onSubmit={handleEditProfileSubmit}\n            onLogOut={handleLogOut}\n            isLoggedIn={isLoggedIn} />\n\n          <Route path=\"/signin\">\n            <Login\n              handleLogin={handleLogin} />\n          </Route>\n\n          <Route path=\"/signup\">\n            <Register\n              handleRegister={handleRegister} />\n          </Route>\n\n          <Route path=\"*\">\n            <Page404 />\n          </Route>\n        </Switch>\n\n        <InfoTooltip\n          isOpen={isInfoToolTipOpen}\n          onClose={closePopups}\n          info={infoToolTipInfo} />\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module"}