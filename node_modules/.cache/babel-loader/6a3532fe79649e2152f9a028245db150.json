{"ast":null,"code":"import React,{useContext}from\"react\";import'./MoviesCard.css';import saved from'../../images/icon_saved.svg';import unsaved from'../../images/unsave-icon.svg';import{CurrentUserContext}from\"../../contexts/CurrentUserContext\";import{useLocation}from\"react-router\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function MoviesCard(_ref){var movie=_ref.movie,handleSetLike=_ref.handleSetLike,handleRemoveLike=_ref.handleRemoveLike;var currentUser=useContext(CurrentUserContext);var isSaved=movie.owner===currentUser._id;var route=useLocation().pathname;var onLike=function onLike(){handleSetLike(movie);};var onDislike=function onDislike(){handleRemoveLike(movie);};var className=\"card__button \".concat(isSaved&&route==='/movies'&&'card__button-saved',\" \").concat(route==='/saved-movies'&&'card__button-unsave',\" \").concat(!isSaved&&'card__button-nonsaved');var buttonSymbol=function buttonSymbol(){if(isSaved&&route==='/movies'){return/*#__PURE__*/_jsx(\"img\",{src:saved,alt:\"\\u0433\\u0430\\u043B\\u043E\\u0447\\u043A\\u0430\"});}else if(route==='/saved-movies'){return/*#__PURE__*/_jsx(\"img\",{src:unsaved,alt:\"\\u043A\\u0440\\u0435\\u0441\\u0442\\u0438\\u043A\"});}else{return'Сохранить';}};var thumbnail=route==='/movies'?\"https://api.nomoreparties.co\".concat(movie.image.url):\"https://api.nomoreparties.co\".concat(movie.thumbnail);var transformDuration=function transformDuration(){var duration=movie.duration;var hours=Math.floor(duration/60);// часы\nvar mins=duration-hours*60;// оставшиеся минуты\nreturn\"\".concat(hours>0?hours+'ч ':'').concat(mins>0?mins+'м':'');};return/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card__info\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"card__title\",children:movie.nameRU}),/*#__PURE__*/_jsx(\"span\",{className:\"card__duration\",children:transformDuration()})]}),/*#__PURE__*/_jsx(\"a\",{className:\"card__image-link\",href:movie.trailerLink,target:\"_blank\",rel:\"noreferrer\",children:/*#__PURE__*/_jsx(\"img\",{className:\"card__image\",src:thumbnail,alt:movie.nameRU})}),/*#__PURE__*/_jsx(\"button\",{className:className,onClick:isSaved?onDislike:onLike,children:buttonSymbol()})]});}export default MoviesCard;","map":{"version":3,"names":["React","useContext","saved","unsaved","CurrentUserContext","useLocation","MoviesCard","movie","handleSetLike","handleRemoveLike","currentUser","isSaved","owner","_id","route","pathname","onLike","onDislike","className","buttonSymbol","thumbnail","image","url","transformDuration","duration","hours","Math","floor","mins","nameRU","trailerLink"],"sources":["/Users/localmoyashi/dev/movies-explorer-frontend/src/components/MoviesCard/MoviesCard.js"],"sourcesContent":["import React, { useContext } from \"react\";\nimport './MoviesCard.css';\nimport saved from '../../images/icon_saved.svg';\nimport unsaved from '../../images/unsave-icon.svg';\nimport { CurrentUserContext } from \"../../contexts/CurrentUserContext\";\nimport { useLocation } from \"react-router\";\n\nfunction MoviesCard({ movie, handleSetLike, handleRemoveLike }) {\n\n  const currentUser = useContext(CurrentUserContext);\n  const isSaved = movie.owner === currentUser._id;\n  const route = useLocation().pathname;\n\n  const onLike = () => {\n    handleSetLike(movie);\n  };\n\n  const onDislike = () => {\n    handleRemoveLike(movie);\n  }\n\n  const className = (\n    `card__button ${ (isSaved && route === '/movies') && 'card__button-saved' } ${ route === '/saved-movies' && 'card__button-unsave' } ${!isSaved && 'card__button-nonsaved'}`\n  )\n  \n  const buttonSymbol = () => {\n    if (isSaved && route === '/movies') {\n      return (<img src={saved} alt=\"галочка\" />);\n    } else if (route === '/saved-movies') {\n      return (<img src={unsaved} alt=\"крестик\" />);\n    } else {\n      return ('Сохранить');\n    }\n  }\n\n  const thumbnail = route === '/movies' ? \n    `https://api.nomoreparties.co${movie.image.url}` :\n    `https://api.nomoreparties.co${movie.thumbnail}`;\n\n  const transformDuration = () => {\n    const duration = movie.duration;\n    const hours = Math.floor(duration / 60); // часы\n    const mins = duration - hours * 60; // оставшиеся минуты\n    return`${hours > 0 ? hours + 'ч ' : ''}${mins > 0 ? mins + 'м' : ''}`;\n  }\n\n  return (\n    <div className=\"card\">\n      <div className=\"card__info\">\n        <h3 className=\"card__title\">{ movie.nameRU }</h3>\n        <span className=\"card__duration\">{ transformDuration() }</span>\n      </div>\n      <a\n        className=\"card__image-link\"\n        href={ movie.trailerLink }\n        target=\"_blank\"\n        rel=\"noreferrer\">\n        <img\n          className=\"card__image\"\n          src={ thumbnail }\n          alt={ movie.nameRU } />\n      </a>\n      <button\n        className={ className }\n        onClick={isSaved ? onDislike : onLike}>\n        { buttonSymbol() }\n      </button>\n    </div>\n  )\n}\n\nexport default MoviesCard;"],"mappings":"AAAA,MAAOA,MAAP,EAAgBC,UAAhB,KAAkC,OAAlC,CACA,MAAO,kBAAP,CACA,MAAOC,MAAP,KAAkB,6BAAlB,CACA,MAAOC,QAAP,KAAoB,8BAApB,CACA,OAASC,kBAAT,KAAmC,mCAAnC,CACA,OAASC,WAAT,KAA4B,cAA5B,C,wFAEA,QAASC,WAAT,MAAgE,IAA1CC,MAA0C,MAA1CA,KAA0C,CAAnCC,aAAmC,MAAnCA,aAAmC,CAApBC,gBAAoB,MAApBA,gBAAoB,CAE9D,GAAMC,YAAW,CAAGT,UAAU,CAACG,kBAAD,CAA9B,CACA,GAAMO,QAAO,CAAGJ,KAAK,CAACK,KAAN,GAAgBF,WAAW,CAACG,GAA5C,CACA,GAAMC,MAAK,CAAGT,WAAW,GAAGU,QAA5B,CAEA,GAAMC,OAAM,CAAG,QAATA,OAAS,EAAM,CACnBR,aAAa,CAACD,KAAD,CAAb,CACD,CAFD,CAIA,GAAMU,UAAS,CAAG,QAAZA,UAAY,EAAM,CACtBR,gBAAgB,CAACF,KAAD,CAAhB,CACD,CAFD,CAIA,GAAMW,UAAS,wBACKP,OAAO,EAAIG,KAAK,GAAK,SAAtB,EAAoC,oBADxC,aACkEA,KAAK,GAAK,eAAV,EAA6B,qBAD/F,aACyH,CAACH,OAAD,EAAY,uBADrI,CAAf,CAIA,GAAMQ,aAAY,CAAG,QAAfA,aAAe,EAAM,CACzB,GAAIR,OAAO,EAAIG,KAAK,GAAK,SAAzB,CAAoC,CAClC,mBAAQ,YAAK,GAAG,CAAEZ,KAAV,CAAiB,GAAG,CAAC,4CAArB,EAAR,CACD,CAFD,IAEO,IAAIY,KAAK,GAAK,eAAd,CAA+B,CACpC,mBAAQ,YAAK,GAAG,CAAEX,OAAV,CAAmB,GAAG,CAAC,4CAAvB,EAAR,CACD,CAFM,IAEA,CACL,MAAQ,WAAR,CACD,CACF,CARD,CAUA,GAAMiB,UAAS,CAAGN,KAAK,GAAK,SAAV,uCACeP,KAAK,CAACc,KAAN,CAAYC,GAD3B,wCAEef,KAAK,CAACa,SAFrB,CAAlB,CAIA,GAAMG,kBAAiB,CAAG,QAApBA,kBAAoB,EAAM,CAC9B,GAAMC,SAAQ,CAAGjB,KAAK,CAACiB,QAAvB,CACA,GAAMC,MAAK,CAAGC,IAAI,CAACC,KAAL,CAAWH,QAAQ,CAAG,EAAtB,CAAd,CAAyC;AACzC,GAAMI,KAAI,CAAGJ,QAAQ,CAAGC,KAAK,CAAG,EAAhC,CAAoC;AACpC,gBAASA,KAAK,CAAG,CAAR,CAAYA,KAAK,CAAG,IAApB,CAA2B,EAApC,SAAyCG,IAAI,CAAG,CAAP,CAAWA,IAAI,CAAG,GAAlB,CAAwB,EAAjE,EACD,CALD,CAOA,mBACE,aAAK,SAAS,CAAC,MAAf,wBACE,aAAK,SAAS,CAAC,YAAf,wBACE,WAAI,SAAS,CAAC,aAAd,UAA8BrB,KAAK,CAACsB,MAApC,EADF,cAEE,aAAM,SAAS,CAAC,gBAAhB,UAAmCN,iBAAiB,EAApD,EAFF,GADF,cAKE,UACE,SAAS,CAAC,kBADZ,CAEE,IAAI,CAAGhB,KAAK,CAACuB,WAFf,CAGE,MAAM,CAAC,QAHT,CAIE,GAAG,CAAC,YAJN,uBAKE,YACE,SAAS,CAAC,aADZ,CAEE,GAAG,CAAGV,SAFR,CAGE,GAAG,CAAGb,KAAK,CAACsB,MAHd,EALF,EALF,cAeE,eACE,SAAS,CAAGX,SADd,CAEE,OAAO,CAAEP,OAAO,CAAGM,SAAH,CAAeD,MAFjC,UAGIG,YAAY,EAHhB,EAfF,GADF,CAuBD,CAED,cAAeb,WAAf"},"metadata":{},"sourceType":"module"}