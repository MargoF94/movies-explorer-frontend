{"ast":null,"code":"import _slicedToArray from\"/Users/localmoyashi/dev/movies-explorer-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{useLocation}from\"react-router-dom\";import FilterCheckbox from'../FilterCheckbox/FilterCheckbox';import'./SearchForm.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SearchForm(_ref){var onSearch=_ref.onSearch,onSavedSearch=_ref.onSavedSearch,handleCheckboxToggle=_ref.handleCheckboxToggle,isShortMovieChecked=_ref.isShortMovieChecked;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),searchWord=_useState2[0],setSearchWord=_useState2[1];var route=useLocation().pathname;function handleSearch(e){e.preventDefault();if(route==='/movies'){localStorage.setItem('searchWord',searchWord);console.log(\"In searchForm: word: \".concat(searchWord));onSearch(searchWord);}else if(route==='/saved-movies'){// При монтировании возвращении на страницу сохраненных фильмов\n// список отфильтрованных фильмов возвращается к пустому массиву.\n// А если массив отфильтрованных фильмов пустой - \n// отображаем все сохраненные фильмы\nonSavedSearch(searchWord);}}function handleChange(e){setSearchWord(e.target.value);}// При монтировании компонента\n// Если пользователь на странице фильмов\n// достаем поисковое слово из хранилища\n// если на странице сохраненных фильмов - \n// оставляет поле воода пустым\nuseEffect(function(){route==='/movies'?setSearchWord(localStorage.getItem('searchWord')):setSearchWord('');},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"search-form\",children:[/*#__PURE__*/_jsxs(\"form\",{className:\"search-form__container\",autoComplete:\"off\",onSubmit:handleSearch,children:[/*#__PURE__*/_jsx(\"input\",{className:\"search-form__input\",type:\"text\",value:searchWord||'',onChange:handleChange,placeholder:\"\\u0424\\u0438\\u043B\\u044C\\u043C\",required:true}),/*#__PURE__*/_jsx(\"button\",{className:\"search-form__button\",type:\"submit\",children:/*#__PURE__*/_jsx(\"span\",{className:\"search-form__search-icon\"})})]}),/*#__PURE__*/_jsx(FilterCheckbox,{isShortMovieChecked:isShortMovieChecked,onSearch:onSearch,onSavedSearch:onSavedSearch,handleCheckboxToggle:handleCheckboxToggle})]});}export default SearchForm;","map":{"version":3,"names":["React","useEffect","useState","useLocation","FilterCheckbox","SearchForm","onSearch","onSavedSearch","handleCheckboxToggle","isShortMovieChecked","searchWord","setSearchWord","route","pathname","handleSearch","e","preventDefault","localStorage","setItem","console","log","handleChange","target","value","getItem"],"sources":["/Users/localmoyashi/dev/movies-explorer-frontend/src/components/SearchForm/SearchForm.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useLocation } from \"react-router-dom\";\nimport FilterCheckbox from '../FilterCheckbox/FilterCheckbox';\nimport './SearchForm.css';\n\nfunction SearchForm({ onSearch, onSavedSearch, handleCheckboxToggle, isShortMovieChecked }) {\n\n  const [searchWord, setSearchWord] = useState('');\n\n  const route = useLocation().pathname;\n\n  function handleSearch(e) {\n    e.preventDefault();\n\n    if (route === '/movies') {\n      localStorage.setItem('searchWord', searchWord);\n      console.log(`In searchForm: word: ${searchWord}`);\n      onSearch(searchWord);\n    } else if (route === '/saved-movies') {\n      // При монтировании возвращении на страницу сохраненных фильмов\n      // список отфильтрованных фильмов возвращается к пустому массиву.\n      // А если массив отфильтрованных фильмов пустой - \n      // отображаем все сохраненные фильмы\n      onSavedSearch(searchWord);\n    }\n    \n  }\n\n  function handleChange(e) {\n    setSearchWord(e.target.value);\n  }\n\n  // При монтировании компонента\n  // Если пользователь на странице фильмов\n  // достаем поисковое слово из хранилища\n  // если на странице сохраненных фильмов - \n  // оставляет поле воода пустым\n\n  useEffect(() => {\n    route === '/movies' ? \n      setSearchWord(localStorage.getItem('searchWord')) :\n      setSearchWord('');\n  }, []);\n\n  return (\n    <div className=\"search-form\">\n      <form\n        className=\"search-form__container\"\n        autoComplete='off'\n        onSubmit={handleSearch}>\n        <input\n          className=\"search-form__input\"\n          type=\"text\"\n          value={searchWord || ''}\n          onChange={handleChange}\n          placeholder='Фильм'\n          required />\n        <button \n          className=\"search-form__button\"\n          type=\"submit\">\n          <span className=\"search-form__search-icon\" />\n        </button>\n      </form>\n      <FilterCheckbox\n        isShortMovieChecked={isShortMovieChecked}\n        onSearch={onSearch}\n        onSavedSearch={onSavedSearch}\n        handleCheckboxToggle={handleCheckboxToggle}/>\n    </div>\n  )\n}\n\nexport default SearchForm;"],"mappings":"sIAAA,MAAOA,MAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,MAAOC,eAAP,KAA2B,kCAA3B,CACA,MAAO,kBAAP,C,wFAEA,QAASC,WAAT,MAA4F,IAAtEC,SAAsE,MAAtEA,QAAsE,CAA5DC,aAA4D,MAA5DA,aAA4D,CAA7CC,oBAA6C,MAA7CA,oBAA6C,CAAvBC,mBAAuB,MAAvBA,mBAAuB,CAE1F,cAAoCP,QAAQ,CAAC,EAAD,CAA5C,wCAAOQ,UAAP,eAAmBC,aAAnB,eAEA,GAAMC,MAAK,CAAGT,WAAW,GAAGU,QAA5B,CAEA,QAASC,aAAT,CAAsBC,CAAtB,CAAyB,CACvBA,CAAC,CAACC,cAAF,GAEA,GAAIJ,KAAK,GAAK,SAAd,CAAyB,CACvBK,YAAY,CAACC,OAAb,CAAqB,YAArB,CAAmCR,UAAnC,EACAS,OAAO,CAACC,GAAR,gCAAoCV,UAApC,GACAJ,QAAQ,CAACI,UAAD,CAAR,CACD,CAJD,IAIO,IAAIE,KAAK,GAAK,eAAd,CAA+B,CACpC;AACA;AACA;AACA;AACAL,aAAa,CAACG,UAAD,CAAb,CACD,CAEF,CAED,QAASW,aAAT,CAAsBN,CAAtB,CAAyB,CACvBJ,aAAa,CAACI,CAAC,CAACO,MAAF,CAASC,KAAV,CAAb,CACD,CAED;AACA;AACA;AACA;AACA;AAEAtB,SAAS,CAAC,UAAM,CACdW,KAAK,GAAK,SAAV,CACED,aAAa,CAACM,YAAY,CAACO,OAAb,CAAqB,YAArB,CAAD,CADf,CAEEb,aAAa,CAAC,EAAD,CAFf,CAGD,CAJQ,CAIN,EAJM,CAAT,CAMA,mBACE,aAAK,SAAS,CAAC,aAAf,wBACE,cACE,SAAS,CAAC,wBADZ,CAEE,YAAY,CAAC,KAFf,CAGE,QAAQ,CAAEG,YAHZ,wBAIE,cACE,SAAS,CAAC,oBADZ,CAEE,IAAI,CAAC,MAFP,CAGE,KAAK,CAAEJ,UAAU,EAAI,EAHvB,CAIE,QAAQ,CAAEW,YAJZ,CAKE,WAAW,CAAC,gCALd,CAME,QAAQ,KANV,EAJF,cAWE,eACE,SAAS,CAAC,qBADZ,CAEE,IAAI,CAAC,QAFP,uBAGE,aAAM,SAAS,CAAC,0BAAhB,EAHF,EAXF,GADF,cAkBE,KAAC,cAAD,EACE,mBAAmB,CAAEZ,mBADvB,CAEE,QAAQ,CAAEH,QAFZ,CAGE,aAAa,CAAEC,aAHjB,CAIE,oBAAoB,CAAEC,oBAJxB,EAlBF,GADF,CA0BD,CAED,cAAeH,WAAf"},"metadata":{},"sourceType":"module"}